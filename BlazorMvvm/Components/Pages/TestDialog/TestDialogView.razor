@using Dmnk.Blazor.Dialogs.Api
@using Dmnk.Blazor.Dialogs.Fluent
@inherits Dmnk.Blazor.Dialogs.Api.BlazorVmDialogViewFor<TestDialogViewModel>

<VmDialogBody>
    <FluentTextField @bind-Value="@Vm.InputValue" 
                     @onkeydown="OnInputKeyDown"
                     Placeholder="Enter something..."/>
    <FluentButton OnClick="@Vm.ShowNestedMessageBoxCommand.Bind(this)">
        Show Nested MessageBox
    </FluentButton>
</VmDialogBody>

<VmDialogFooter>
  <FluentButton Appearance="Appearance.Accent" @onclick="@Dialog.Close">Confirm</FluentButton>
  <FluentButton @onclick="@Dialog.Dismiss">Cancel</FluentButton>
</VmDialogFooter>

@code {
    [Parameter] public override required VmDialogReference Dialog { get; set; }
    [Parameter] public override required VmDialogParameters Params { get; set; }

    private async Task OnInputKeyDown(KeyboardEventArgs e)
    {
        await Task.Delay(10); // give the input field a chance to update the bound value
        if (e.Key == "Enter")
        {
            await Dialog.Close();
        }
    }

}